{"remainingRequest":"C:\\laragon\\www\\filmarket-dev\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\filmarket-dev\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\laragon\\www\\filmarket-dev\\src\\store\\modules\\sessionModule.ts","dependencies":[{"path":"C:\\laragon\\www\\filmarket-dev\\src\\store\\modules\\sessionModule.ts","mtime":1633970338733},{"path":"C:\\laragon\\www\\filmarket-dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\filmarket-dev\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\laragon\\www\\filmarket-dev\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L2xhcmFnb24vd3d3L2ZpbG1hcmtldC1kZXYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6L2xhcmFnb24vd3d3L2ZpbG1hcmtldC1kZXYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9sYXJhZ29uL3d3dy9maWxtYXJrZXQtZGV2L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQzovbGFyYWdvbi93d3cvZmlsbWFya2V0LWRldi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIkM6L2xhcmFnb24vd3d3L2ZpbG1hcmtldC1kZXYvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSAidHNsaWIiOwppbXBvcnQgeyBnZXRNb2R1bGUsIE1vZHVsZSwgTXV0YXRpb25BY3Rpb24sIE11dGF0aW9uLCBBY3Rpb24sIFZ1ZXhNb2R1bGUgfSBmcm9tICd2dWV4LW1vZHVsZS1kZWNvcmF0b3JzJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBodHRwIH0gZnJvbSAnQC91dGlscy9odHRwJzsKaW1wb3J0IHsgZmV0Y2hVc2VyLCBmZXRjaFN1Yk1lbnUgfSBmcm9tICdAL3V0aWxzL3V0aWxpdHknOwoKdmFyIHNlc3Npb25Nb2R1bGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWV4TW9kdWxlKSB7CiAgX2luaGVyaXRzKHNlc3Npb25Nb2R1bGUsIF9WdWV4TW9kdWxlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihzZXNzaW9uTW9kdWxlKTsKCiAgZnVuY3Rpb24gc2Vzc2lvbk1vZHVsZSgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgc2Vzc2lvbk1vZHVsZSk7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ190b2tlbicpOwogICAgX3RoaXMucmVmcmVzaF90b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdfcmVmcmVzaF90b2tlbicpOwogICAgX3RoaXMudG9rZW5zID0gW107CiAgICBfdGhpcy51c2VyU2VzaW9uID0gW107CiAgICBfdGhpcy51c2VyTWVudSA9IFtdOwogICAgX3RoaXMudXNlclN1Yk1lbnUgPSBbXTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhzZXNzaW9uTW9kdWxlLCBbewogICAga2V5OiAiZ2V0VG9rZW5zIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy50b2tlbnM7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VG9rZW5zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUb2tlbnModG9rZW5zKSB7CiAgICAgIHRoaXMudG9rZW5zID0gdG9rZW5zOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFRva2VuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUb2tlbih0b2tlbikgewogICAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0UmVmcmVzaF90b2tlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UmVmcmVzaF90b2tlbihyZWZyZXNoX3Rva2VuKSB7CiAgICAgIHRoaXMucmVmcmVzaF90b2tlbiA9IHJlZnJlc2hfdG9rZW47CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzdHJveVRva2VucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveVRva2VucygpIHsKICAgICAgdGhpcy50b2tlbnMgPSBbXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXN0cm95VG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3lUb2tlbigpIHsKICAgICAgdGhpcy50b2tlbiA9IG51bGw7CiAgICAgIHRoaXMucmVmcmVzaF90b2tlbiA9IG51bGw7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dpbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSh1c2VyTG9naW4pIHsKICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gaHR0cC5wb3N0KCdsb2dpbicsIHVzZXJMb2dpbikudGhlbihmdW5jdGlvbiAocGF5bG9hZCkgewogICAgICAgICAgICAgICAgICBpZiAocGF5bG9hZCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgICAgICAgdXNlckxvZ2luLmNvZGUgPSBwYXlsb2FkLnN0YXR1czsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJMb2dpbi5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9rZW4gPSBwYXlsb2FkLmRhdGEuZGF0YS5hY2Nlc3NfdG9rZW47IC8vY29uc3Qgc3JlZnJlc2hfdG9rZW46IHN0cmluZyA9IHBheWxvYWQuZGF0YS5kYXRhLnJlZnJlc2hfdG9rZW47CgogICAgICAgICAgICAgICAgICAgICAgLy9jb25zdCBzcmVmcmVzaF90b2tlbjogc3RyaW5nID0gcGF5bG9hZC5kYXRhLmRhdGEucmVmcmVzaF90b2tlbjsKICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdfdG9rZW4nLCBzdG9rZW4pOyAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnX3JlZnJlc2hfdG9rZW4nLCBzcmVmcmVzaF90b2tlbik7CgogICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19yZWZyZXNoX3Rva2VuJywgc3JlZnJlc2hfdG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmNvbnRleHQuY29tbWl0KCdzZXRUb2tlbicsIHN0b2tlbik7IC8vdGhpcy5jb250ZXh0LmNvbW1pdCgnc2V0UmVmcmVzaF90b2tlbicsIHNyZWZyZXNoX3Rva2VuKTsKCgogICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmNvbnRleHQuY29tbWl0KCdzZXRSZWZyZXNoX3Rva2VuJywgc3JlZnJlc2hfdG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmNvbnRleHQuY29tbWl0KCdzZXRUb2tlbnMnLCBwYXlsb2FkLmRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHVzZXJMb2dpbi5jb2RlID0gNTAwOwogICAgICAgICAgICAgICAgICAgIHVzZXJMb2dpbi5tZXNzYWdlID0gJ0Vycm9yIGdyYXZlIGNvbiBTZXJ2aWRvcic7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIHVzZXJMb2dpbi5jb2RlID0gNTAwOwogICAgICAgICAgICAgICAgICB1c2VyTG9naW4ubWVzc2FnZSA9ICdFcnJvciA1MDAgZ3JhdmUgY29uIFNlcnZpZG9yICc7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdXNlckxvZ2luKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGxvZ2luKF94KSB7CiAgICAgICAgcmV0dXJuIF9sb2dpbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbG9naW47CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2dvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9sb2dvdXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaHR0cC5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnICsgdGhpcy50b2tlbjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBodHRwLnBvc3QoJ2xvZ291dCcpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ190b2tlbicpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnX3JlZnJlc2hfdG9rZW4nKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5jb250ZXh0LmNvbW1pdCgnZGVzdHJveVRva2VuJyk7CgogICAgICAgICAgICAgICAgICBfdGhpczMuY29udGV4dC5jb21taXQoJ2Rlc3Ryb3lUb2tlbnMnKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkOwogICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdFcnJvciAke2V9Jyk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICAgIHJldHVybiBfbG9nb3V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2dvdXQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRSZWZyZXNoVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRSZWZyZXNoVG9rZW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICB2YXIgc3Rva2VuOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdG9rZW4gPSAnJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBodHRwLnBvc3QoJ3JlZnJlc2h0b2tlbicsIHsKICAgICAgICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nOiB0aGlzLnJlZnJlc2hfdG9rZW4KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGF5bG9hZC5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIF9zdG9rZW4gPSBwYXlsb2FkLmRhdGEuZGF0YS5hY2Nlc3NfdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JlZnJlc2hfdG9rZW4gPSBwYXlsb2FkLmRhdGEuZGF0YS5yZWZyZXNoX3Rva2VuOwogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ190b2tlbicsIF9zdG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ19yZWZyZXNoX3Rva2VuJywgc3JlZnJlc2hfdG9rZW4pOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC5jb250ZXh0LmNvbW1pdCgnc2V0VG9rZW4nLCBfc3Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczQuY29udGV4dC5jb21taXQoJ3NldFJlZnJlc2hfdG9rZW4nLCBzcmVmcmVzaF90b2tlbik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5kYXRhLmVycm9yKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKCkgewogICAgICAgIHJldHVybiBfZ2V0UmVmcmVzaFRva2VuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBnZXRSZWZyZXNoVG9rZW47CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJsb2FkVXNlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvYWRVc2VyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgdXNlciwgdXNlclN1Yk1lbnUsIG1lbnUsIG1lbnVBcnJheSwgdXNlck1lbnU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFVzZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdXNlciA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoU3ViTWVudSh1c2VyLnJvbGVfaWQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB1c2VyU3ViTWVudSA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgbWVudSA9IFtdOyAvLy9yZWdpc3RybyB0b2RvcyBscyBwYWRyZXMgZGUgbG9zIHN1Ym1lbnVzCgogICAgICAgICAgICAgICAgT2JqZWN0LmtleXModXNlclN1Yk1lbnUpLm1hcChmdW5jdGlvbiAoSW5kZXgpIHsKICAgICAgICAgICAgICAgICAgdmFyIHN1Ym1lbnUgPSB1c2VyU3ViTWVudVtJbmRleF07CiAgICAgICAgICAgICAgICAgIG1lbnUucHVzaChzdWJtZW51Lm1lbnUuZGF0YSk7CiAgICAgICAgICAgICAgICB9KTsgLy9lbGltaW5vIGxvcyBwYWRyZXMgcmVwZXRpZG9zCgogICAgICAgICAgICAgICAgbWVudUFycmF5ID0gbWVudS5maWx0ZXIoZnVuY3Rpb24gKG1lbnVJdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgICB2YXIgX21lbnUgPSBKU09OLnN0cmluZ2lmeShtZW51SXRlbSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gaW5kZXggPT09IG1lbnUuZmluZEluZGV4KGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKSA9PT0gX21lbnU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB1c2VyTWVudSA9IG1lbnVBcnJheTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB7CiAgICAgICAgICAgICAgICAgIHVzZXJTZXNpb246IHVzZXIsCiAgICAgICAgICAgICAgICAgIHVzZXJNZW51OiB1c2VyTWVudSwKICAgICAgICAgICAgICAgICAgdXNlclN1Yk1lbnU6IHVzZXJTdWJNZW51CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGxvYWRVc2VyKCkgewogICAgICAgIHJldHVybiBfbG9hZFVzZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvYWRVc2VyOwogICAgfSgpCiAgfV0pOwoKICByZXR1cm4gc2Vzc2lvbk1vZHVsZTsKfShWdWV4TW9kdWxlKTsKCl9fZGVjb3JhdGUoW011dGF0aW9uXSwgc2Vzc2lvbk1vZHVsZS5wcm90b3R5cGUsICJzZXRUb2tlbnMiLCBudWxsKTsKCl9fZGVjb3JhdGUoW011dGF0aW9uXSwgc2Vzc2lvbk1vZHVsZS5wcm90b3R5cGUsICJzZXRUb2tlbiIsIG51bGwpOwoKX19kZWNvcmF0ZShbTXV0YXRpb25dLCBzZXNzaW9uTW9kdWxlLnByb3RvdHlwZSwgInNldFJlZnJlc2hfdG9rZW4iLCBudWxsKTsKCl9fZGVjb3JhdGUoW011dGF0aW9uXSwgc2Vzc2lvbk1vZHVsZS5wcm90b3R5cGUsICJkZXN0cm95VG9rZW5zIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtNdXRhdGlvbl0sIHNlc3Npb25Nb2R1bGUucHJvdG90eXBlLCAiZGVzdHJveVRva2VuIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtBY3Rpb25dLCBzZXNzaW9uTW9kdWxlLnByb3RvdHlwZSwgImxvZ2luIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtBY3Rpb25dLCBzZXNzaW9uTW9kdWxlLnByb3RvdHlwZSwgImxvZ291dCIsIG51bGwpOwoKX19kZWNvcmF0ZShbQWN0aW9uXSwgc2Vzc2lvbk1vZHVsZS5wcm90b3R5cGUsICJnZXRSZWZyZXNoVG9rZW4iLCBudWxsKTsKCl9fZGVjb3JhdGUoW011dGF0aW9uQWN0aW9uKHsKICBtdXRhdGU6IFsndXNlclNlc2lvbicsICd1c2VyTWVudScsICd1c2VyU3ViTWVudSddCn0pXSwgc2Vzc2lvbk1vZHVsZS5wcm90b3R5cGUsICJsb2FkVXNlciIsIG51bGwpOwoKc2Vzc2lvbk1vZHVsZSA9IF9fZGVjb3JhdGUoW01vZHVsZSh7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBuYW1lOiAnc2Vzc2lvbicsCiAgc3RvcmU6IHN0b3JlLAogIGR5bmFtaWM6IHRydWUKfSldLCBzZXNzaW9uTW9kdWxlKTsKZXhwb3J0IGRlZmF1bHQgZ2V0TW9kdWxlKHNlc3Npb25Nb2R1bGUpOw=="},{"version":3,"sources":["C:\\laragon\\www\\filmarket-dev\\src\\store\\modules\\sessionModule.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  getModule,\r\n  Module,\r\n  MutationAction,\r\n  Mutation,\r\n  Action,\r\n  VuexModule,\r\n} from 'vuex-module-decorators';\r\nimport store from '@/store';\r\nimport { UserSubmit } from '../interfaces/Auth';\r\nimport { UserToken } from '../interfaces/UserToken';\r\nimport { http } from '@/utils/http';\r\nimport { User } from '../interfaces/User';\r\nimport { fetchUser,  fetchSubMenu } from '@/utils/utility'\r\nimport { Menu } from '../interfaces/Menu';\r\nimport { SubMenu } from '../interfaces/SubMenu';\r\n\r\n@Module({\r\n  namespaced: true,\r\n  name: 'session',\r\n  store,\r\n  dynamic: true,\r\n})\r\n\r\nclass sessionModule extends VuexModule {\r\n\r\n  token: string | null = localStorage.getItem('_token');\r\n  refresh_token: string | null = localStorage.getItem('_refresh_token');\r\n  tokens: UserToken[] = [];\r\n  userSesion: User[] = [];\r\n  userMenu: Menu[] = [];\r\n  userSubMenu: SubMenu[] = [];\r\n\r\n  get getTokens(): UserToken[] {\r\n    return this.tokens;\r\n  }\r\n\r\n  @Mutation\r\n  setTokens(tokens: UserToken[]) {\r\n    this.tokens = tokens;\r\n  }\r\n\r\n  @Mutation\r\n  setToken(token: string) {\r\n    this.token = token;\r\n  }\r\n  @Mutation\r\n  setRefresh_token(refresh_token: string) {\r\n\r\n    this.refresh_token = refresh_token;\r\n  }\r\n  @Mutation\r\n  destroyTokens() {\r\n    this.tokens = [];\r\n  }\r\n  @Mutation\r\n  destroyToken() {\r\n    this.token = null;\r\n    this.refresh_token = null;\r\n  }\r\n  @Action\r\n  async login(userLogin: UserSubmit) {\r\n    await http\r\n      .post('login', userLogin)\r\n      .then((payload: any) => {\r\n        if (payload) {\r\n          console.log(payload.data)\r\n          console.log(payload)\r\n          userLogin.code = payload.status\r\n\r\n          if (userLogin.code === 200) {\r\n            const stoken: string = payload.data.data.access_token;\r\n            //const srefresh_token: string = payload.data.data.refresh_token;\r\n            localStorage.setItem('_token', stoken);\r\n           // localStorage.setItem('_refresh_token', srefresh_token);\r\n            this.context.commit('setToken', stoken);\r\n            //this.context.commit('setRefresh_token', srefresh_token);\r\n            this.context.commit('setTokens', payload.data.data);\r\n\r\n          }\r\n        } else {\r\n          userLogin.code = 500;\r\n          userLogin.message = 'Error grave con Servidor';\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        userLogin.code = 500;\r\n        userLogin.message = 'Error 500 grave con Servidor ';\r\n      });\r\n    return userLogin;\r\n  }\r\n\r\n  @Action\r\n  async logout() {\r\n    http.defaults.headers.common['Authorization'] = 'Bearer ' + this.token;\r\n    await http\r\n      .post('logout')\r\n      .then((payload: any) => {\r\n        localStorage.removeItem('_token');\r\n        localStorage.removeItem('_refresh_token');\r\n        this.context.commit('destroyToken');\r\n        this.context.commit('destroyTokens');\r\n        return payload;\r\n      })\r\n      .catch((e) => console.log('Error ${e}'));\r\n  }\r\n\r\n  @Action\r\n  async getRefreshToken() {\r\n    const stoken: string = ''\r\n    await http\r\n      .post('refreshtoken',\r\n        {\r\n          'refresh_token': this.refresh_token\r\n        })\r\n      .then((payload: any) => {\r\n        if (payload) {\r\n          if (payload.data.code === 200) {\r\n            const stoken: string = payload.data.data.access_token;\r\n            const srefresh_token: string = payload.data.data.refresh_token;\r\n            localStorage.setItem('_token', stoken);\r\n            localStorage.setItem('_refresh_token', srefresh_token);\r\n            this.context.commit('setToken', stoken);\r\n            this.context.commit('setRefresh_token', srefresh_token);\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.data.error);\r\n        return false;\r\n      });\r\n    return true;\r\n  }\r\n\r\n  @MutationAction({ mutate: ['userSesion', 'userMenu', 'userSubMenu'] })\r\n  async loadUser() {\r\n    const user = await fetchUser();\r\n    //const userMenu = await fetchMenu();\r\n    const userSubMenu = await fetchSubMenu(user.role_id);\r\n    const menu: Menu[] =[];\r\n\r\n    ///registro todos ls padres de los submenus\r\n    Object.keys(userSubMenu).map(function(Index){\r\n      let submenu = userSubMenu[Index];\r\n      menu.push(submenu.menu.data);\r\n    });\r\n    \r\n\r\n    //elimino los padres repetidos\r\n    const menuArray = menu.filter((menuItem, index) => {\r\n      const _menu = JSON.stringify(menuItem);\r\n      return index === menu.findIndex(obj => {\r\n        return JSON.stringify(obj) === _menu;\r\n      });\r\n    });\r\n\r\n    const userMenu = menuArray;\r\n    return { userSesion: user, userMenu, userSubMenu };\r\n  }\r\n\r\n\r\n  \r\n}\r\nexport default getModule(sessionModule);\r\n"],"sourceRoot":""}]}