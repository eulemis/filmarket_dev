{"remainingRequest":"C:\\filmarket\\filmarket_dev\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\filmarket\\filmarket_dev\\src\\components\\UploadFileMultiple.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\filmarket\\filmarket_dev\\src\\components\\UploadFileMultiple.vue","mtime":1647899501540},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcnRpY3Vsb01vZHVsZSAgZnJvbSAnQC9zdG9yZS9tb2R1bGVzL2FydGljdWxvTW9kdWxlJzsKaW1wb3J0IHN0b3JhZ2VEYXRhIGZyb20gJ0Avc3RvcmUvc2VydmljZXMvc3RvcmFnZVNlcnZpY2UnCmltcG9ydCBEcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnaW1hZ2VWaWV3JywKICAgIHByb3BzOlsnaWQnXSwKICAgIGNvbXBvbmVudHM6ewogICAgICAgIERyYWdnYWJsZQogICAgfSwKICAgIGRhdGEgKCl7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaW1hZ2U6JycsCiAgICAgICAgICAgIGRhdGFVcGxvYWQ6W10sCiAgICAgICAgICAgIGRhdGFTdWJtaXQ6ewogICAgICAgICAgICBmb3JtZGF0YSA6IHt9LAogICAgICAgICAgICAgICAgaWQgICA6IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb3ZlcmxheSA6IGZhbHNlLAogICAgICAgICAgICBzbmFja2JhciA6IGZhbHNlLAogICAgICAgICAgICB0ZXh0bXNqIDogJycsCiAgICAgICAgICAgIGNvbG9yIDogJycsCiAgICAgICAgICAgIHNob3dJbWFnZTogZmFsc2UsCiAgICAgICAgICAgIGlzQWN0aXZlOicnLCAgICAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7IAogICAgICAgIHVybEltZzogZnVuY3Rpb24oaW1nKXsKICAgICAgICAgICAgcmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwoaW1nKTsKICAgICAgICB9LAogICAgICAgIHN0YXJ0OiBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coInN0YXJ0IiwgZXZ0KQogICAgICAgIH0sCiAgICAgICAgZW5kOiBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBjaGVja01vdmU6IGZ1bmN0aW9uKGUpIHsKCiAgICAgICAgfSwKCiAgICAgICAgZ2V0SW1nQmFzZSgpeyAgCiAgICAgICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgICAgICAgdmFyIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50OwogICAgICAgICAgICB2YXIgZmlsZXMgPSBldmVudC50YXJnZXQuZmlsZXM7CiAgICAgICAgICAgCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKICAgICAgICAgICAgICAgIF90aGlzLmRhdGFVcGxvYWQucHVzaChmaWxlc1tpXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIAogICAgICAgIHNlbGVjdEltYWdlKGluZGV4KXsKICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGluZGV4IAogICAgICAgIH0sCiAgICAgICAgZGVsSW1nKGluZGV4KXsKICAgICAgICAgICAgdGhpcy5kYXRhVXBsb2FkLnNwbGljZShpbmRleCwxKTsKICAgICAgICB9LAogICAgICAgIGRlbGV0ZUFsbCgpewogICAgICAgICAgICB0aGlzLmRhdGFVcGxvYWQgPSBbXTsKICAgICAgICB9LAogICAgICAgIGFzeW5jIHVwbG9hZEZpbGUoKXsgCiAgICAgICAgICAgIHRoaXMub3ZlcmxheSA9IHRydWUKICAgICAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzIAogICAgICAgICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgICAgdmFyIGZpbGVzID0gdGhpcy5kYXRhVXBsb2FkOwogICAgICAgICAgICB2YXIgdG90YWxmaWxlcyA9IHRoaXMuZGF0YVVwbG9hZC5sZW5ndGg7IAogICAgICAgIAogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvdGFsZmlsZXM7IGkrKykgeyAKICAgICAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgiZm90b3NbXSIsIGZpbGVzW2ldKTsKICAgICAgICAgICAgfQogICAKICAgICAgICAgICAgdGhpcy5kYXRhU3VibWl0LmZvcm1kYXRhID0gZm9ybURhdGEKICAgICAgICAgICAgdGhpcy5kYXRhU3VibWl0LmlkICAgICAgID0gdGhpcy5pZAogICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgYXJ0aWN1bG9Nb2R1bGUudXBkYXRlQXJ0aWN1bG8odGhpcy5kYXRhU3VibWl0KTsKICAgICAgICAgICAgdGhpcy50ZXh0bXNqID0gJ0ltYWdlbmVzIFN1YmlkYXMgY29uIMOJeGl0by4nCiAgICAgICAgICAgIHRoaXMuY29sb3IgPSAnc3VjY2VzcycKICAgICAgICAgICAgdGhpcy5zbmFja2JhciA9IHRydWUKICAgICAgICAgICAgdGhpcy5kYXRhVXBsb2FkID0gW107CiAgICAgICAgICAgIHRoaXMuYmFjaygpCiAgICAgICAgICAgIHRoaXMub3ZlcmxheSA9IGZhbHNlICAKICAgICAgICB9LAogICAgICAgIGJhY2soKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSBmYWxzZQogICAgICAgICAgICB9LDIwMDApOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["UploadFileMultiple.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadFileMultiple.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <v-overlay :value=\"overlay\">\r\n            <v-progress-circular\r\n                indeterminate\r\n                size=\"64\"\r\n            ></v-progress-circular>\r\n        </v-overlay>\r\n        <div class=\"image-view\">\r\n            <div class=\"addbox\">\r\n                <input type=\"file\" @change=\"getImgBase()\"  id=\"uploadfiles\" name=\"uploadfiles[]\" ref=\"uploadfiles\" multiple=\"multiple\" >\r\n                <div class=\"addbtn\"><i class='fa fa-cloud-upload'></i></div>\r\n            </div>\r\n       \r\n                <Draggable  \r\n                    v-if=\"dataUpload.length > 0\"  \r\n                    class=\"w-full max-w-md\" \r\n                    ghost-class=\"moving-card\" \r\n                    :animation=\"200\" \r\n                    :move=\"checkMove\"\r\n                    @start=\"start\"\r\n                    @end=\"end\"\r\n                    :list=\"dataUpload\"\r\n                >\r\n                    <div class=\"item\" v-for=\"(item, index) in dataUpload\" :key=\"index\">\r\n                        <span class=\"cancel-btn\" @click=\"delImg(index)\"><i class=\"fa fa-trash\"></i></span>\r\n                        <span v-if=\"index == 0 \" :class=\"{ check_btn : index == 0 }\">PORTADA</span>\r\n                        <img @click=\"selectImage(index)\" :src=\"urlImg(item)\">\r\n                    </div>\r\n                </Draggable>\r\n           \r\n        </div>\r\n        <div class=\"mb-5\">\r\n            <v-btn small @click=\"deleteAll()\" color=\"primary mr-3\" >Limpiar</v-btn>\r\n            <v-btn small @click=\"uploadFile()\" color=\"success\"  >Actualizar</v-btn> \r\n        </div>\r\n        <Notificacion :snackbar=\"snackbar\" :textmsj=\"textmsj\"/>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\n    import articuloModule  from '@/store/modules/articuloModule';\r\n    import storageData from '@/store/services/storageService'\r\n    import Draggable from 'vuedraggable'\r\n    export default {\r\n        name: 'imageView',\r\n        props:['id'],\r\n        components:{\r\n            Draggable\r\n        },\r\n        data (){\r\n            return {\r\n                image:'',\r\n                dataUpload:[],\r\n                dataSubmit:{\r\n                formdata : {},\r\n                    id   : 0\r\n                },\r\n                overlay : false,\r\n                snackbar : false,\r\n                textmsj : '',\r\n                color : '',\r\n                showImage: false,\r\n                isActive:'',               \r\n            }\r\n        },\r\n        methods: { \r\n            urlImg: function(img){\r\n                return URL.createObjectURL(img);\r\n            },\r\n            start: function (evt) {\r\n                //console.log(\"start\", evt)\r\n            },\r\n            end: function (evt) {\r\n            \r\n            },\r\n            checkMove: function(e) {\r\n\r\n            },\r\n\r\n            getImgBase(){  \r\n                 const _this = this\r\n                var event = event || window.event;\r\n                var files = event.target.files;\r\n               \r\n                for (let i = 0; i < files.length; i++) {\r\n                    const reader = new FileReader()\r\n                    _this.dataUpload.push(files[i]);\r\n                }\r\n               \r\n            },\r\n            \r\n            selectImage(index){\r\n                this.isActive = index \r\n            },\r\n            delImg(index){\r\n                this.dataUpload.splice(index,1);\r\n            },\r\n            deleteAll(){\r\n                this.dataUpload = [];\r\n            },\r\n            async uploadFile(){ \r\n                this.overlay = true\r\n                const _this = this \r\n                let formData = new FormData();\r\n                var files = this.dataUpload;\r\n                var totalfiles = this.dataUpload.length; \r\n            \r\n                for (var i = 0; i < totalfiles; i++) { \r\n                    formData.append(\"fotos[]\", files[i]);\r\n                }\r\n       \r\n                this.dataSubmit.formdata = formData\r\n                this.dataSubmit.id       = this.id\r\n                const data = await articuloModule.updateArticulo(this.dataSubmit);\r\n                this.textmsj = 'Imagenes Subidas con Ã‰xito.'\r\n                this.color = 'success'\r\n                this.snackbar = true\r\n                this.dataUpload = [];\r\n                this.back()\r\n                this.overlay = false  \r\n            },\r\n            back() {\r\n                setTimeout(() => {\r\n                    this.$router.go(-1);\r\n                    this.snackbar = false\r\n                },2000);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style scoped>\r\n    *{margin:0 auto;padding:0;font-family:\"Microsoft Yahei\";}\r\n    .clearboth::after{\r\n        content:\"\";\r\n        display:block;\r\n        clear:both;\r\n    }\r\n    .image-view{\r\n        display: flex;\r\n        align-items: center;\r\n        flex-direction: column;\r\n        flex-wrap: wrap;\r\n        width: 1;\r\n        margin: 50px auto;\r\n        background-color: #f6f6f6;\r\n        padding: 18px;\r\n        border:  3px dashed #ccc;\r\n        \r\n    }\r\n    .image-view .addbox{\r\n        float:left;\r\n        position:relative;\r\n        height:100px;\r\n        width:100px;\r\n        margin-bottom:20px;\r\n        text-align:center;\r\n    }\r\n    .image-view .addbox input{\r\n        position:absolute;\r\n        left:0;\r\n        height:100px;\r\n        width:100px;\r\n        opacity:0; \r\n    }\r\n    .image-view .addbox .addbtn{\r\n        float:left;\r\n        height:100px;\r\n        width:100px;\r\n        line-height:100px;\r\n        color:black;\r\n        font-size:40px;\r\n        background:#fff;\r\n        border-radius:10px;\r\n        margin-top:10px;\r\n    }\r\n    .image-view .item {\r\n        position:relative;\r\n        float:left;\r\n        height:100px;\r\n    /*     width:100px; */\r\n        margin:10px 10px 0 0;\r\n    }\r\n    .image-view .item .cancel-btn{\r\n        position: absolute;\r\n        right: -4px;\r\n        top: -2px;\r\n        display: block;\r\n        width: 20px;\r\n        height: 20px;\r\n        color: #fff;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        background: red;\r\n        border-radius: 10px;\r\n        cursor: pointer;\r\n    }\r\n    .image-view .item .check_btn{\r\n        position: absolute;\r\n        bottom: 0;\r\n        left: 0px;\r\n        display: block;\r\n        width: 100%;\r\n        height: 25px;\r\n        color: green;\r\n        font-weight: 600;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        background: rgb(178 228 202);\r\n        border-radius: 0px 0px 5px 5px;\r\n        cursor: pointer;\r\n       \r\n    }\r\n     .p_texto{\r\n         position: absolute;\r\n        bottom: 0;\r\n        left: 0px;\r\n        display: block;\r\n        width: 100%;\r\n        height: 25px;\r\n        color: #fff;\r\n        line-height: 20px;\r\n        text-align: center;\r\n        background: rgb(136, 207, 184);\r\n        border-radius: 0px 0px 5px 5px;\r\n        cursor: pointer;\r\n    }\r\n    .image-view .item img{\r\n        width:100%;\r\n        height:100%;\r\n        border-radius:5px;\r\n        cursor:pointer;\r\n    }\r\n    .image-view .view{\r\n        clear:both;\r\n    }\r\n    .mb-5{\r\n        float: right;\r\n    }\r\n    @media screen and (max-width: 640px) {\r\n        .image-view .view{\r\n            display: grid;\r\n        }\r\n    }\r\n    .moving-card {\r\n        @apply opacity-50 bg-gray-100 border border-blue-500;\r\n    }\r\n   \r\n</style>"]}]}