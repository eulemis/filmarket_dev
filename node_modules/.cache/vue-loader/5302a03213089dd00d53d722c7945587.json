{"remainingRequest":"C:\\filmarket\\filmarket_dev\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\filmarket\\filmarket_dev\\src\\views\\servicios\\order\\ProcesarEnvio.vue?vue&type=style&index=0&id=3b18d921&lang=scss&scoped=true&","dependencies":[{"path":"C:\\filmarket\\filmarket_dev\\src\\views\\servicios\\order\\ProcesarEnvio.vue","mtime":1645669007170},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\filmarket\\filmarket_dev\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnBhbmVsX3doaXRlewogICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICBib3JkZXItcmFkaXVzOiA2cHg7Cn0K"},{"version":3,"sources":["ProcesarEnvio.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6UA;AACA;AACA;AACA","file":"ProcesarEnvio.vue","sourceRoot":"src/views/servicios/order","sourcesContent":["<template>\r\n    <v-row>\r\n        <v-overlay :value=\"overlay\">\r\n        <v-progress-circular\r\n            indeterminate\r\n            size=\"64\"\r\n        ></v-progress-circular>\r\n        </v-overlay>\r\n          <TitleSection :sectiontitle=\"sectiontitle\"/>\r\n        <v-col cols=\"12\" md=\"12\">\r\n            <form-wizard\r\n                class=\"test\"\r\n                shape=\"tab\"\r\n                title=\"\"\r\n                subtitle=\"\"\r\n                color=\"#0081FF\"\r\n                next-button-text=\"Ver Pedido\"\r\n                finish-button-text=\"Enviar Pedido\"\r\n                @on-complete=\"onComplete\" \r\n            >\r\n                <tab-content title=\"Artículos Seleccionados\" icon=\"mdi mdi-cart-outline\">\r\n                    <v-row>\r\n                        <v-col cols=\"12\" md=\"8\">\r\n                            <div\r\n                                v-for=\"(product, index) in this.getCartOrder\"\r\n                                :key=\"index\"\r\n                                class=\"mb-3 panel_white\"\r\n                            >\r\n                                <v-card-text>\r\n                                    <div\r\n                                        class=\"d-flex align-center justify-space-between flex-wrap\"\r\n                                    >\r\n                                        <div class=\"d-flex flex-wrap\">\r\n                                            <v-img\r\n                                                class=\"mr-2\"\r\n                                                :src=\"product.foto\"\r\n                                                alt=\"\"\r\n                                                max-width=\"200\"\r\n                                                max-height=\"200\"\r\n                                            ></v-img>\r\n                                            <div>\r\n                                                <h5 class=\"font-weight-thin\">\r\n                                                    {{ product.title }}\r\n                                                </h5>\r\n                                                <v-chip\r\n                                                    class=\"mb-4\"\r\n                                                    color=\"success\"\r\n                                                    small\r\n                                                    text-color=\"white\"\r\n                                                >\r\n                                                    In Stock\r\n                                                </v-chip>\r\n                                                <p class=\"mb-0 text-18\">\r\n                                                    ${{product.precio * product.qty}}\r\n                                                </p>\r\n                                                <div class=\"mb-5\">\r\n                                                    <p class=\"text--disabled\">\r\n                                                        <v-icon\r\n                                                            small\r\n                                                            color=\"gray\"\r\n                                                            >mdi-cart</v-icon\r\n                                                        >\r\n                                                        Free SHipping\r\n                                                    </p>\r\n                                                    <p>\r\n                                                        Quantity\r\n                                                        {{ product.qty }}\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <v-btn-toggle\r\n                                              \r\n                                                mandatory\r\n                                                tile\r\n                                                class=\"d-flex align-center\"\r\n                                            >\r\n                                                <div>\r\n                                                    <v-btn\r\n                                                        @click=\"deleteCart(product)\" \r\n                                                        class=\"mr-2 danger--text\"\r\n                                                        small\r\n                                                        depressed\r\n                                                        color=\"danger lighten-5\"\r\n                                                    >\r\n                                                        <v-icon\r\n                                                            left\r\n                                                            color=\"danger\"\r\n                                                            >mdi-close</v-icon\r\n                                                        >\r\n                                                        Remove\r\n                                                    </v-btn>\r\n                                                    <v-btn\r\n                                                    style=\"display:none\"\r\n                                                        depressed\r\n                                                        small\r\n                                                        class=\"primary--text\"\r\n                                                        color=\"primary lighten-5\"\r\n                                                    >\r\n                                                        <v-icon\r\n                                                            left\r\n                                                            color=\"primary\"\r\n                                                            >mdi-heart-outline</v-icon\r\n                                                        >\r\n                                                        Wishlist\r\n                                                    </v-btn>\r\n                                                </div>\r\n                                            </v-btn-toggle>\r\n                                        </div>\r\n                                    </div>\r\n                                </v-card-text>\r\n                            </div>\r\n                        </v-col>\r\n                        <v-col cols=\"12\" md=\"4\">\r\n                            <div class=\"mb-3 panel_white\">\r\n                                <v-card-title>Resumen Pedido</v-card-title>\r\n                                <v-card-text>\r\n                                    <div\r\n                                        class=\"d-flex justify-space-between mb-3\"\r\n                                    >\r\n                                     \r\n                                    </div>\r\n                                    <v-divider></v-divider>\r\n                                    <div class=\"mt-3\">\r\n                                        <h6 class=\"text--disabled\">\r\n                                           Detalle de Precio\r\n                                        </h6>\r\n\r\n                                        <div\r\n                                            class=\"d-flex justify-space-between\"\r\n                                        >\r\n                                            <p\r\n                                                class=\"text--disabled mb-1 text-18 mr-2\"\r\n                                            >\r\n                                                Sub Total :\r\n                                            </p>\r\n                                            <p\r\n                                                class=\"text--disabled mb-1 text-18\"\r\n                                            >\r\n                                             $ {{ totalAmount }}\r\n                                            </p>\r\n                                        </div>\r\n                                        <v-divider class=\"my-3\"></v-divider>\r\n\r\n                                        <div\r\n                                            class=\"d-flex justify-space-between\"\r\n                                        >\r\n                                            <h6\r\n                                                class=\" font-weight-bold mb-1 text-18 mr-2\"\r\n                                            >\r\n                                                Total:\r\n                                            </h6>\r\n                                            <h6 class=\" mb-1 text-18\">\r\n                                                $ {{ totalAmount }}\r\n                                            </h6>\r\n                                        </div>\r\n                                    </div>\r\n                                </v-card-text>\r\n                            </div>\r\n                        </v-col>\r\n                    </v-row>\r\n                </tab-content>\r\n            </form-wizard>\r\n            <Notificacion :snackbar=\"snackbar\" :textmsj=\"textmsj\"/>\r\n        </v-col>\r\n    </v-row>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { Vue, Component, Prop }     from 'vue-property-decorator';\r\nimport sessionModule from '@/store/modules/sessionModule';\r\nimport orderModule            from '@/store/modules/orderModule';\r\nimport storageData from '@/store/services/storageService'\r\nimport {serialize, deserialize } from 'jsonapi-fractal'\r\n\r\n\r\n@Component({\r\n  components: {\r\n   \r\n  }\r\n})\r\nexport default class ProcesarPago extends Vue {\r\n  \r\n    items = ['Home', 'Office']\r\n    subTotal = null\r\n    sectiontitle = ''\r\n    selectOrder : any = []\r\n    Order : any = {}\r\n    overlay = false;\r\n    snackbar = false\r\n    textmsj = ''\r\n    color = ''\r\n    dataSetting : any = []\r\n    get getCartOrder() {\r\n        return orderModule.getCartList; \r\n    }\r\n    get settingConfig() : any {\r\n        return sessionModule.getSetting; \r\n    }\r\n    get totalAmount() {\r\n        let total = 0\r\n        return (total += this.getCartOrder.reduce(\r\n            (left, cur:any) => left + cur.precio * cur.qty,\r\n            0\r\n        ))\r\n    }\r\n    get totalDescuento() {\r\n        let total = 0\r\n        return (total += this.getCartOrder.reduce(\r\n            (left, cur:any) => left + cur.monto_descuento * cur.qty,\r\n            0\r\n        ))\r\n    }\r\n    get FormRequestPedido(): any {\r\n        return serialize(this.Order,'pedidos',{});\r\n    }\r\n\r\n    get FormRequestCotizacion(): any {\r\n        return serialize(this.Order,'cotizaciones',{});\r\n    }\r\n\r\n\r\n    get FormRequestOrderDetalle() : any {\r\n        return serialize(this.getCartOrder,'pedidosdetalles',{});\r\n    }\r\n    deleteCart(cart:any) {\r\n        this.getCartOrder.splice(this.getCartOrder.indexOf(cart), 1)\r\n        storageData.set('_dataSelect',this.getCartOrder)\r\n    }\r\n    async onComplete() {\r\n       \r\n        if (this.dataSetting.tipo_documento == 'pedido') {\r\n            this.orderPedido()\r\n        } else {\r\n            this.orderCotizacion()\r\n        } \r\n\r\n    }\r\nsaveOrderPedido\r\n    async orderPedido(){\r\n        //this.overlay = true\r\n        const data : any = await orderModule.saveOrderPedido(this.FormRequestPedido)\r\n        if (data.status == 201) {\r\n            let i = 0\r\n            for (i=0; i < this.getCartOrder.length; i++) {\r\n                if (this.dataSetting.tipo_documento == 'pedido') {\r\n                    this.getCartOrder[i].id_pedido = data.data.data.id\r\n                } \r\n            };\r\n        }      \r\n        const dataDetalle : any = await orderModule.savePedidoDetalles(this.FormRequestOrderDetalle)\r\n        this.textmsj = 'Pedido Creado con Éxito.'\r\n        this.color = 'success'\r\n        this.snackbar = true\r\n        this.back();\r\n\t\tthis.overlay = false  \r\n    }\r\n\r\n    async orderCotizacion(){\r\n        //this.overlay = true\r\n        const data : any = await orderModule.saveOrderCotizacion(this.FormRequestCotizacion)\r\n        if (data.status == 201) {\r\n            let i = 0\r\n            for (i=0; i < this.getCartOrder.length; i++) {\r\n                if (this.dataSetting.tipo_documento == 'cotizacion') {\r\n                    this.getCartOrder[i].id_pedido = data.data.data.id\r\n                }                 \r\n            };\r\n        } \r\n      /* \r\n        const dataDetalle : any = await orderModule.saveCotizacionDetalles(this.FormRequestOrderDetalle)\r\n        this.textmsj = 'Cotización Creada con Éxito.'\r\n        this.color = 'success'\r\n        this.snackbar = true\r\n        this.back();\r\n\t\tthis.overlay = false  */ \r\n    }\r\n\r\n    back() {\r\n        setTimeout(() => {\r\n            this.$router.push({ name: \"listapedidos\"});\r\n            this.snackbar = false\r\n        },2000);\r\n    }\r\n\r\n    currentDate() {\r\n        var date = new Date();\r\n        return  date.toISOString();\r\n    }\r\n    mounted(){\r\n        this.dataSetting = this.settingConfig \r\n        let orderDB = storageData.get('_dataSelect')\r\n        if (orderDB === null) {\r\n            this.selectOrder = []\r\n        } else {\r\n            this.selectOrder = orderDB\r\n        }\r\n        this.Order = {\r\n            co_pedido: \"0\",\r\n            co_cotizacion: \"0\",\r\n            fecha:  \"2022-02-09 11:13:19\",\r\n            status: \"0\",\r\n            porcentaje_descuento: \"40.00\",\r\n            monto_bruto: this.totalAmount,\r\n            monto_descuento: (this.totalAmount * 40.00) / 100 ,\r\n            monto_iva: \"20\",\r\n            monto_exento: \"10\",\r\n            monto_neto: \"25\",\r\n            tasa: \"15\",\r\n            direccion_entrega:  this.$route.params.direccion,\r\n            comentarios:\"\",\r\n            estatus: \"1\",\r\n            id_cliente: this.$route.params.id_cliente,\r\n            id_condiciones_pagos: this.$route.params.id_condiciones_pagos,\r\n            id_vendedor: \"1\",//si el usuario es vendedor entonces se usa su id sino el id_vendedor del cliente\r\n            id_sucursal: \"1\", // ?\r\n            id_moneda: \"1\", // ?\r\n            id_transporte: \"1\", // ?\r\n            precio:\"30.00\",\r\n            qty:0\r\n        }\r\n        orderDB.map(function (value:any, key:any) {\r\n       \t\r\n        });  \r\n\r\n    }\r\n\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n    .panel_white{\r\n        background: white;\r\n        border-radius: 6px;\r\n    }\r\n</style>\r\n"]}]}