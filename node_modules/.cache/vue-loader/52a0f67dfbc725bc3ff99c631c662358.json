{"remainingRequest":"C:\\frontend\\filmarket\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\frontend\\filmarket\\src\\views\\servicios\\contacto\\EditarContacto.vue?vue&type=script&lang=ts&","dependencies":[{"path":"C:\\frontend\\filmarket\\src\\views\\servicios\\contacto\\EditarContacto.vue","mtime":1638225130000},{"path":"C:\\frontend\\filmarket\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\frontend\\filmarket\\node_modules\\babel-loader\\lib\\index.js","mtime":59851904000},{"path":"C:\\frontend\\filmarket\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"C:\\frontend\\filmarket\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\frontend\\filmarket\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgVnVlLCBDb21wb25lbnQsIFByb3AsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7DQppbXBvcnQgY29udGFjdE1vZHVsZSBmcm9tICdAL3N0b3JlL21vZHVsZXMvY29udGFjdE1vZHVsZSc7DQppbXBvcnQgY2xpZW50TW9kdWxlIGZyb20gJ0Avc3RvcmUvbW9kdWxlcy9jbGllbnRNb2R1bGUnOw0KaW1wb3J0IHsgcmVxdWlyZWQgfSBmcm9tICd2ZWUtdmFsaWRhdGUvZGlzdC9ydWxlcycNCmltcG9ydCB7IFZhbGlkYXRpb25PYnNlcnZlciB9IGZyb20gJ3ZlZS12YWxpZGF0ZScNCmltcG9ydCB7c2VyaWFsaXplLCBkZXNlcmlhbGl6ZSB9IGZyb20gJ2pzb25hcGktZnJhY3RhbCcNCg0KQENvbXBvbmVudCh7DQogIGNvbXBvbmVudHM6IHsNCg0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRpdGFyQ29udGFjdG8gZXh0ZW5kcyBWdWUgew0KCUBQcm9wKCkgY2xpZW50ZXM/OiBhbnk7DQoJQFByb3AoKSBlZGl0RGF0YT86IE9iamVjdDsNCiAgICBjbGllbnRlRWRpdCA9ICcnDQoJZGVzY3JpcHRpb25MaW1pdCA9IDYwOw0KCWVudHJpZXMgPSBbXTsNCglkYXRhU2VhcmNoQ2xpZW50ZSA6IGFueSA9IFtdOw0KICAgIGlzTG9hZGluZyA9IGZhbHNlOw0KICAgIG1vZGVsID0gbnVsbDsNCiAgICBzZWFyY2ggPSBudWxsOw0KCW92ZXJsYXkgPSBmYWxzZTsNCglzdWJ0aXRsZSA6IHN0cmluZyA9ICcnDQogICAgdXBkYXRlIDogYm9vbGVhbiA9IGZhbHNlOw0KCWNvbnRhY3RGb3JtIDogYW55ID0ge307DQogICAgc25hY2tiYXIgPSBmYWxzZQ0KICAgIHRleHRtc2ogPSAnJw0KICAgIGNvbG9yID0gJycNCiAgICBzZWN0aW9udGl0bGUgPSAnQWN0dWFsaXphciBEYXRvcyBkZSBDb250YWN0bycNCglpbmFjdGl2byA9IFsNCiAgICAgICAge3ZhbHVlOiAnMCcsIHRleHQ6ICdJbmFjdGl2byd9LA0KICAgICAgICB7dmFsdWU6ICcxJywgdGV4dDogJ0FjdGl2byd9DQogICAgXTsNCgkkcmVmcyE6IHsNCiAgICAgICAgY29udGFjdEZvcm06IEluc3RhbmNlVHlwZTx0eXBlb2YgVmFsaWRhdGlvbk9ic2VydmVyPjsNCiAgICB9Ow0KCWdldCBGb3JtUmVxdWVzdCgpOiBhbnkgew0KICAgICAgICByZXR1cm4gc2VyaWFsaXplKHRoaXMuY29udGFjdEZvcm0sJ2NvbnRhY3Rvcycse30pOw0KICAgIH0NCg0KICAgIGdldCBpdGVtcyAoKSB7DQogICAgICAgIHJldHVybiB0aGlzLmRhdGFTZWFyY2hDbGllbnRlLm1hcChlbnRyeSA9PiB7DQogICAgICAgICAgY29uc3QgRGVzY3JpcHRpb24gPSBlbnRyeS5yYXpvblNvY2lhbC5sZW5ndGggPiB0aGlzLmRlc2NyaXB0aW9uTGltaXQNCiAgICAgICAgICAgID8gZW50cnkucmF6b25Tb2NpYWwuc2xpY2UoMCwgdGhpcy5kZXNjcmlwdGlvbkxpbWl0KSArICcuLi4nDQogICAgICAgICAgICA6IGVudHJ5LnJhem9uU29jaWFsDQogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGVudHJ5LCB7IERlc2NyaXB0aW9uIH0pDQogICAgICAgIH0pDQogICAgfSANCg0KICAgIEBXYXRjaCgnc2VhcmNoJywgeyBpbW1lZGlhdGU6IGZhbHNlIH0pDQogICAgICAgIHNlYXJjaFVwZGF0ZSAodmFsKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0xvYWRpbmcpIHJldHVybg0KICAgICAgICAgICAgdGhpcy5zZWFyY2hDbGllbnRlcyh2YWwpOw0KICAgICAgICB9DQoNCglhc3luYyBzZWFyY2hDbGllbnRlcyh2YWwpIHsNCgkJdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQoJCWNvbnN0IGRhdGEgPSBhd2FpdCBjb250YWN0TW9kdWxlLmdldEZpbHRlcnNDbGllbnRlKHZhbCk7DQogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpDQoJCXRoaXMuZGF0YVNlYXJjaENsaWVudGUgPSBkYXRhDQoJCXRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCgl9DQoNCiAgICBjb25maXJtKCk6IGFueSB7DQoJCXRoaXMudXBkYXRlID0gdHJ1ZQ0KCX0gDQogICAgDQoJb25TdWJtaXQoKSB7DQoJCWNvbnN0IHZhbGlkIDogYW55ID0gIHRoaXMuJHJlZnMuY29udGFjdEZvcm0udmFsaWRhdGUoKTsNCiAgICAgDQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgICAgdGhpcy51cGRhdGUgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy51cGRhdGVDb250YWN0bygpOw0KICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICBhbGVydCgnQ2FtcG9zIEluY29tcGxldG9zJyk7DQogICAgICAgIH0gDQoJCSANCiAgICB9DQoNCglhc3luYyB1cGRhdGVDb250YWN0bygpIHsNCgkJdGhpcy5vdmVybGF5ID0gdHJ1ZQ0KICAgIAljb25zdCBkYXRhID0gYXdhaXQgY29udGFjdE1vZHVsZS51cGRhdGVDb250YWN0KHRoaXMuRm9ybVJlcXVlc3QpDQoJCXRoaXMucmVzZXQoKTsNCiAgICAgICAgdGhpcy50ZXh0bXNqID0gJ0NvbnRhY3RvIEFjdHVhbGl6YWRvIGNvbiDDiXhpdG8uJw0KICAgICAgICB0aGlzLmNvbG9yID0gJ3N1Y2Nlc3MnDQogICAgICAgIHRoaXMuc25hY2tiYXIgPSB0cnVlDQogICAgICAgIHRoaXMuYmFjaygpOw0KCQl0aGlzLm92ZXJsYXkgPSBmYWxzZQ0KICAgIH07DQoJcmVzZXQgKCkgew0KICAgICAgICB0aGlzLiRyZWZzLmNvbnRhY3RGb3JtLnJlc2V0KCkNCiAgICB9Ow0KICAgIGJhY2soKSB7DQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICAgICAgICAgIHRoaXMuc25hY2tiYXIgPSBmYWxzZQ0KICAgICAgICB9LDIwMDApOw0KICAgIH0NCiAgICBhc3luYyBnZXRDb250YWN0QnlJZChpZCkgew0KICAgICAgICB0aGlzLm92ZXJsYXkgPSB0cnVlDQogICAgICAgIGNvbnN0IGRhdGEgOiBhbnkgPSBhd2FpdCBjb250YWN0TW9kdWxlLmdldENvbnRhY3RCeUlkKGlkKQ0KICAgICAgICBpZihkYXRhKXsNCiAgICAgICAgICAgIGNvbnN0IGRhdGFDbGllbnRlIDogYW55ID0gYXdhaXQgY2xpZW50TW9kdWxlLmdldENsaWVudEJ5SWQoZGF0YS5pZF9jbGllbnRlKQ0KICAgICAgICAgICAgdGhpcy5zZWFyY2ggPSBkYXRhQ2xpZW50ZS5yYXpvbl9zb2NpYWwNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLmNvbnRhY3RGb3JtID0gZGF0YTsNCiAgICAgICAgdGhpcy5vdmVybGF5ID0gZmFsc2UNCiAgICB9DQoNCglkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgICBydWxlczogWw0KICAgICAgICAgICAgKHY6YW55KSA9PiAhIXYgfHwgJ0NhbXBvIHJlcXVlcmlkbycNCiAgICAgICAgXSwNCgkJZW1haWxSdWxlczogWw0KCQkJdiA9PiAhIXYgfHwgJ0UtbWFpbCBpcyByZXF1ZXJpZG8nLA0KCQkJdiA9PiAvLitALisvLnRlc3QodikgfHwgJ0UtbWFpbCBtdXN0IGJlIHZhbGlkJywNCgkJXSwgDQogICAgICAgICAgICANCiAgICAgICAgfQ0KICAgIH07DQogICAgbW91bnRlZCgpew0KICAgICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQNCiAgICAgICAgdGhpcy5nZXRDb250YWN0QnlJZChpZCk7DQogICAgICAgLyogIHRoaXMuZGF0YVNlYXJjaENsaWVudGUgID0gW3sgaWQ6ICcwJywgcmF6b25Tb2NpYWw6ICdJbmFjdGl2bycsc2VsZWN0ZWQ6J3NlbGVjdGVkJ31dICovDQogICAgICAgDQogICAgfQ0KfQ0K"},{"version":3,"sources":["EditarContacto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"EditarContacto.vue","sourceRoot":"src/views/servicios/contacto","sourcesContent":["<template>\r\n    <div>\r\n\t\t<v-overlay :value=\"overlay\">\r\n            <v-progress-circular\r\n                indeterminate\r\n                size=\"64\"\r\n            ></v-progress-circular>\r\n        </v-overlay>\r\n        <v-form ref=\"contactForm\"  lazy-validation class=\"form_contacto\" >\r\n            <input type=\"hidden\" v-model=\"contactForm.id\" value=\"0\" >\r\n                <TitleSection :sectiontitle=\"sectiontitle\"/>\r\n                <v-row>\r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-text-field\r\n                    label=\"Nombre Completo\"\r\n                    placeholder=\"Nombre Completo\"\r\n                    outlined\r\n                    dense\r\n                    :rules=\"rules\"\r\n                    v-model=\"contactForm.nombre_completo\"\r\n                ></v-text-field>\r\n                </v-col>\r\n        \r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-text-field\r\n                    label=\"Teléfono\"\r\n                    placeholder=\"Teléfono\"\r\n                    outlined\r\n                    dense\r\n                    :rules=\"rules\"\r\n                    v-model=\"contactForm.telefono\"\r\n                ></v-text-field>\r\n                </v-col>\r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-text-field\r\n                    label=\"Celular\"\r\n                    placeholder=\"Celular\"\r\n                    outlined\r\n                    dense\r\n                    :rules=\"rules\"\r\n                    v-model=\"contactForm.celular\"\r\n                ></v-text-field>\r\n                </v-col>\r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-text-field\r\n                    label=\"Cargo\"\r\n                    placeholder=\"Cargo\"\r\n                    outlined\r\n                    dense\r\n                    :rules=\"rules\"\r\n                    v-model=\"contactForm.cargo\"\r\n                ></v-text-field>\r\n                </v-col>\r\n            \r\n            </v-row>\r\n            <v-row>\r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-text-field\r\n                    label=\"Código Contacto\"\r\n                    placeholder=\"Código Contacto\"\r\n                    outlined\r\n                    dense\r\n                    :rules=\"rules\"\r\n                    v-model=\"contactForm.co_contacto\"\r\n                ></v-text-field>\r\n                </v-col>\r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-text-field\r\n                    label=\"Email\"\r\n                    placeholder=\"Email\"\r\n                    outlined\r\n                    dense\r\n                    :rules=\"emailRules\"\r\n                    v-model=\"contactForm.email\"\r\n                ></v-text-field>\r\n                </v-col>\r\n                <v-col\r\n                cols=\"12\"\r\n                sm=\"6\"\r\n                md=\"3\"\r\n                >\r\n                <v-autocomplete\r\n                v-model=\"contactForm.id_cliente\"\r\n                :items=\"items\"\r\n                :loading=\"isLoading\"\r\n                :search-input.sync=\"search\"\r\n                hide-no-data\r\n                show-selected\r\n                item-text=\"razonSocial\"\r\n                item-value=\"id\"\r\n                label=\"Cliente\"\r\n                placeholder=\"Buscar Cliente\"\r\n                dense\r\n                outlined\r\n                :value=\"clienteEdit\"\r\n              \r\n                ></v-autocomplete>\r\n                \r\n                <v-expand-transition>\r\n                    <v-list\r\n                        v-if=\"model\"\r\n                        style=\"display:none\"\r\n                    >\r\n                        <v-list-item\r\n                        v-for=\"(field, i) in dataSearchCliente\"\r\n                        :key=\"i\"\r\n                        >\r\n                        </v-list-item>\r\n                    </v-list>\r\n                </v-expand-transition>\r\n                </v-col>\r\n            </v-row>\r\n            <div class=\"mt-5 d-flex justify-end \">\r\n                <v-btn small color=\"error mr-3\" @click=\"back()\">Atras</v-btn>\r\n                <v-btn small color=\"primary mr-3\" @click=\"reset\">Limpiar</v-btn>\r\n                <v-btn small @click=\"confirm\" color=\"success\"  >actualizar</v-btn> \r\n            </div>\r\n                <v-dialog v-model=\"update\" max-width=\"350\">\r\n            <v-card>\r\n                <v-card-title class=\"text-h5\">\r\n                    Actualizar Registro\r\n                </v-card-title>\r\n\r\n                <v-card-text>\r\n                    Estas Seguro de Actualizar el Registro?\r\n                </v-card-text>\r\n\r\n                <v-card-actions>\r\n                    <v-spacer></v-spacer>\r\n\r\n                    <v-btn\r\n                        color=\"red darken-1\"\r\n                        text\r\n                        @click=\"update = false\"\r\n                    >\r\n                        Cancelar\r\n                    </v-btn>\r\n                    <v-btn\r\n                        color=\"green darken-1\"\r\n                        text\r\n                        @click=\"onSubmit()\"\r\n                    >\r\n                        Aceptar\r\n                    </v-btn>\r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-dialog>\r\n        <Notificacion :snackbar=\"snackbar\" :textmsj=\"textmsj\"/>\r\n        </v-form>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\">\r\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator';\r\nimport contactModule from '@/store/modules/contactModule';\r\nimport clientModule from '@/store/modules/clientModule';\r\nimport { required } from 'vee-validate/dist/rules'\r\nimport { ValidationObserver } from 'vee-validate'\r\nimport {serialize, deserialize } from 'jsonapi-fractal'\r\n\r\n@Component({\r\n  components: {\r\n\r\n  }\r\n})\r\nexport default class EditarContacto extends Vue {\r\n\t@Prop() clientes?: any;\r\n\t@Prop() editData?: Object;\r\n    clienteEdit = ''\r\n\tdescriptionLimit = 60;\r\n\tentries = [];\r\n\tdataSearchCliente : any = [];\r\n    isLoading = false;\r\n    model = null;\r\n    search = null;\r\n\toverlay = false;\r\n\tsubtitle : string = ''\r\n    update : boolean = false;\r\n\tcontactForm : any = {};\r\n    snackbar = false\r\n    textmsj = ''\r\n    color = ''\r\n    sectiontitle = 'Actualizar Datos de Contacto'\r\n\tinactivo = [\r\n        {value: '0', text: 'Inactivo'},\r\n        {value: '1', text: 'Activo'}\r\n    ];\r\n\t$refs!: {\r\n        contactForm: InstanceType<typeof ValidationObserver>;\r\n    };\r\n\tget FormRequest(): any {\r\n        return serialize(this.contactForm,'contactos',{});\r\n    }\r\n\r\n    get items () {\r\n        return this.dataSearchCliente.map(entry => {\r\n          const Description = entry.razonSocial.length > this.descriptionLimit\r\n            ? entry.razonSocial.slice(0, this.descriptionLimit) + '...'\r\n            : entry.razonSocial\r\n          return Object.assign({}, entry, { Description })\r\n        })\r\n    } \r\n\r\n    @Watch('search', { immediate: false })\r\n        searchUpdate (val) {\r\n            if (this.isLoading) return\r\n            this.searchClientes(val);\r\n        }\r\n\r\n\tasync searchClientes(val) {\r\n\t\tthis.isLoading = true\r\n\t\tconst data = await contactModule.getFiltersCliente(val);\r\n        console.log(data)\r\n\t\tthis.dataSearchCliente = data\r\n\t\tthis.isLoading = false\r\n\t}\r\n\r\n    confirm(): any {\r\n\t\tthis.update = true\r\n\t} \r\n    \r\n\tonSubmit() {\r\n\t\tconst valid : any =  this.$refs.contactForm.validate();\r\n     \r\n        if (valid) {\r\n            this.update = false\r\n            this.updateContacto();\r\n        }else {\r\n            alert('Campos Incompletos');\r\n        } \r\n\t\t \r\n    }\r\n\r\n\tasync updateContacto() {\r\n\t\tthis.overlay = true\r\n    \tconst data = await contactModule.updateContact(this.FormRequest)\r\n\t\tthis.reset();\r\n        this.textmsj = 'Contacto Actualizado con Éxito.'\r\n        this.color = 'success'\r\n        this.snackbar = true\r\n        this.back();\r\n\t\tthis.overlay = false\r\n    };\r\n\treset () {\r\n        this.$refs.contactForm.reset()\r\n    };\r\n    back() {\r\n        setTimeout(() => {\r\n            this.$router.go(-1);\r\n            this.snackbar = false\r\n        },2000);\r\n    }\r\n    async getContactById(id) {\r\n        this.overlay = true\r\n        const data : any = await contactModule.getContactById(id)\r\n        if(data){\r\n            const dataCliente : any = await clientModule.getClientById(data.id_cliente)\r\n            this.search = dataCliente.razon_social\r\n        }\r\n        this.contactForm = data;\r\n        this.overlay = false\r\n    }\r\n\r\n\tdata(){\r\n    return{\r\n        rules: [\r\n            (v:any) => !!v || 'Campo requerido'\r\n        ],\r\n\t\temailRules: [\r\n\t\t\tv => !!v || 'E-mail is requerido',\r\n\t\t\tv => /.+@.+/.test(v) || 'E-mail must be valid',\r\n\t\t], \r\n            \r\n        }\r\n    };\r\n    mounted(){\r\n        let id = this.$route.params.id\r\n        this.getContactById(id);\r\n       /*  this.dataSearchCliente  = [{ id: '0', razonSocial: 'Inactivo',selected:'selected'}] */\r\n       \r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.form_contacto{\r\n    background: white;\r\n    padding: 5%;\r\n    border-radius: 8px;\r\n}\r\n</style>\r\n"]}]}